### Проблемы существующего решения

* Система плохо масштабируется при росте нагрузки
* Высокое время отклика на запросы пользователя
* Система не отказоустойчивая

Все внутренние взаимодействия синхронные, поэтому при росте нагрузки на core-app также вырастет нагрузка и
на другие микросервисы. Сервис ins-product-aggregator возвращает агрегированные данные только после опроса нескольких внешних API,
которые также могут быть ненадежными.
При выходе из строя одного из сервисов вся система по цепи становится неработоспособной

### Предлагаемые решения

В зависимости от того, насколько часто меняются данные о тарифах и продуктов, и зависят ли они от
данных заявки конкретного потребителя имеем 2 варианта

* Если данные от СК меняются редко, не особо зависят от заявки, и расчет стоимости по тарифам происходит
в core-app, можно настроить фоновую задачу по опросу страховых в aggregator и записи их в БД,
а запросы к aggregator от core-app закэшировать в Redis

* Если данные от СК меняются часто и необходимо в реальном времени получать свежие данные,
необходимо договариваться об асинхронном взаимодействии с внешними системами. Поскольку агрегатор пока небольшой,
вряд ли страховые компании будут дорабатываться под нашу систему, поэтому от постоянного опроса по REST
внешних систем уйти не получится. При этом можно убрать взаимодействие запрос-ответ между core-app и aggregator
и по мере поступления новых данных из СК отправлять событие в шину, и core-app будет подписан на эти события.
Продукты пользователю так же можно будет отображать в реальном времени по мере поступления данных через WebSocket
Если возникнет требование отправлять в СК заявки клиентов, это так же можно будет сделать через шину сообщений.
Данные об оформленных страховок так же заведем через MessageBus для использования их сервисом взаиморасчетов

Этот вариант более гибкий, который также позволит убрать периодические задачи по запросу данных (раз в день, месяц),
там где они есть